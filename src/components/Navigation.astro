---
import navData from '../data/navData.js';
import { Icon } from 'astro-icon/components';
import FullscreenModal from '../components/FullscreenModal.astro';
import FullscreenModalButton from './FullscreenModalButton.astro';

// TODO: Configure to use fullscreen modal in mobile view
---

<!-- <div id='page-header' class='navbar bg-base-100 fixed top-0 z-50'> -->
<div id='page-header' class='navbar absolute bg-base-100 bottom-0 z-50'>
  <div class='navbar-start'>
    <div class='dropdown'>
      <FullscreenModalButton />
      <!-- <div tabindex='0' role='button' class='btn btn-ghost lg:hidden'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          class='h-5 w-5'
          fill='none'
          viewBox='0 0 24 24'
          stroke='currentColor'
        >
          <path
            stroke-linecap='round'
            stroke-linejoin='round'
            stroke-width='2'
            d='M4 6h16M4 12h8m-8 6h16'></path>
        </svg>
      </div> -->
      <!-- <ul
        tabindex='0'
        class='menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow'
      >
        <li></li>
        {
          navData.map((link) => (
            <li>
              <a href={link.path}>{link.name}</a>
            </li>
          ))
        }
      </ul> -->
    </div>
    <a class='btn btn-ghost text-xl' href='/'>
      <Icon name='tct_logo' class='text-4xl' />
      Southern MN TCT
    </a>
  </div>
  <div class='navbar-center hidden lg:flex'>
    <ul class='menu menu-horizontal px-1'>
      {
        navData.map((link) => (
          <li>
            <a href={link.path}>{link.name}</a>
          </li>
        ))
      }
      <!-- <li>
        <details>
          <summary>Parent</summary>
          <ul class='p-2'>
            <li><a>Submenu 1</a></li>
            <li><a>Submenu 2</a></li>
          </ul>
        </details>
      </li> -->
      <!-- <li><a>Item 3</a></li> -->
    </ul>
  </div>
  <div class='navbar-end'>
    <a class='btn hidden lg:flex'>Contact Us</a>
  </div>
</div>

<script>
  const header = document.querySelector('#page-header') as HTMLElement;
  const page = document.documentElement;

  document.addEventListener('scroll', () => {
    const d = page.clientHeight - page.scrollTop - header.offsetHeight;
    header.classList.toggle('fixed-header', d < 0);
  });
</script>

<style>
  .btn {
    @apply hover:bg-accent hover:text-base-100;
  }
  .menu a {
    @apply hover:bg-accent hover:text-base-100 mx-2;
  }

  .fixed-header {
    @apply fixed bottom-auto top-0;
    /* @apply border-default bg-default text-default; */
  }
</style>
